# Technology Stack

**Analysis Date:** 2026-01-21

## Languages

**Primary:**
- Python 3.12 - Core package and all source code in `src/maya_grass_gen/`

**Secondary:**
- MEL (Maya Embedded Language) - Generated expressions for Maya animation (generated by `WindField.generate_maya_expression()`)

## Runtime

**Environment:**
- Python 3.12+ (specified in `setup.py` via `python_requires="~=3.12"`)
- Dual-mode execution: standalone Python or Autodesk Maya's Python environment (mayapy)

**Package Manager:**
- pip - Primary package installation
- pip-tools - Dependency constraint management via `requirements.in` and `requirements-dev.in`
- Lockfile: `requirements.in` and `requirements-dev.in` (source of truth, no `requirements.txt` generated yet)

## Frameworks

**Core:**
- setuptools >= 45.0.0 - Package build and distribution
- setuptools.build_meta - Modern build backend

**Testing:**
- pytest 7.x - Test runner and framework
  - Config: `pyproject.toml` [tool.pytest.ini_options]
  - Plugins: pytest-cov, pytest-mock, pytest-sugar
- mypy - Static type checking for Python 3.12 with strict mode
  - Config: `pyproject.toml` [tool.mypy]

**Build/Dev:**
- ruff - Linting and code style enforcement
  - Config: `pyproject.toml` [tool.ruff]
  - Line length: 88 characters
  - Docstring convention: Google-style (pydocstyle)
  - McCabe complexity limit: 10

## Key Dependencies

**Critical:**
- opensimplex >= 0.4.5, < 0.5 - Perlin/Simplex noise generation for wind fields
  - Used in `src/maya_grass_gen/noise_utils.py` for fbm_noise2/fbm_noise3
  - Required for natural-looking wind patterns

- numpy - Numerical computing and array operations
  - Used in `src/maya_grass_gen/terrain.py` for terrain analysis
  - Used for point generation, clustering, and calculations

- pillow - Image processing for terrain textures
  - Used in `src/maya_grass_gen/terrain.py` for loading bump/displacement maps
  - Required for obstacle detection from image files

**Infrastructure:**
- None - No external APIs, databases, or cloud services required

## Configuration

**Environment:**
- No environment variables required for standalone use
- Maya path-specific configuration only needed when integrating with Maya:
  - macOS: `/Applications/Autodesk/maya2024/Maya.app/Contents/bin/mayapy`
  - Windows: `C:\Program Files\Autodesk\Maya2024\bin\mayapy.exe`

**Build:**
- `pyproject.toml` - Main configuration (setuptools, pytest, mypy, ruff, coverage)
- `setup.py` - Package metadata and dependency loading
- `Makefile` - Development task automation (install, lint, typecheck, test, clean)

**Code Quality:**
- Ruff linting enabled with 60+ rule categories (E, F, W, I, D, A, etc.)
- MyPy strict mode with `disallow_untyped_calls`, `disallow_untyped_defs`, `disallow_incomplete_defs`
- Coverage reporting configured with test/doc exclusions
- Per-file linting exceptions for Maya-specific code in `src/maya_grass_gen/`

## Platform Requirements

**Development:**
- Python 3.12 or higher
- pip and setuptools
- Works on macOS, Windows, Linux for standalone development

**Production:**
- Autodesk Maya 2024+ for full functionality
- Standalone Python 3.12+ for testing and library use without Maya
- Dependencies installed in target Python environment:
  - For standalone: pip install via requirements.in
  - For Maya: mayapy -m pip install (as documented in README.md)

---

*Stack analysis: 2026-01-21*
